source /usr/share/vim/google/google.vim

" Loads youcompleteme, the awesomest autocompletion engine.
" See go/ycm for more details.
Glug youcompleteme-google
"nnoremap <C-]> :YcmCompleter GoTo<CR>  " Override the default jump key.

" Load the code formatting plugin. We first load the open-source version. Then,
" we load the internal google settings. Then, we automatically enable formatting
" when we write the file for Go, BUILD, proto, and c/cpp files.
" Use :h codefmt-google or :h codefmt for more details.
Glug codefmt
Glug codefmt-google

Glug outline-window
nnoremap <Leader>g :GoogleOutlineWindow<CR>

" Wrap autocmds inside an augroup to protect against reloading this script.
" For more details, see:
" http://learnvimscriptthehardway.stevelosh.com/chapters/14.html
augroup autoformat_settings
  autocmd!
  autocmd FileType borg,gcl,patchpanel AutoFormatBuffer gclfmt
  autocmd FileType bzl AutoFormatBuffer buildifier
  autocmd FileType c,cpp,proto,javascript AutoFormatBuffer clang-format
  autocmd FileType dart AutoFormatBuffer dartfmt
  autocmd FileType go AutoFormatBuffer gofmt
  autocmd FileType java AutoFormatBuffer google-java-format
  autocmd FileType jslayout AutoFormatBuffer jslfmt
  autocmd FileType markdown AutoFormatBuffer mdformat
  autocmd FileType ncl AutoFormatBuffer nclfmt
  autocmd FileType python AutoFormatBuffer pyformat
  autocmd FileType textpb AutoFormatBuffer text-proto-format
  " autocmd FileType html,css,json AutoFormatBuffer js-beautify
augroup END

" Load the Related Files plugin. Use :h relatedfiles for more details.
" The default mapping to run :RelatedFilesWindow is <Leader>r. Thus, <Leader>r
" -> b: BUILD file, t: test file, c: source file, h: header file, and so on.
Glug relatedfiles plugin[mappings] window_position="topleft"

" Use :BlazeDepsUpdate in files you're editing and blazedeps will determine the
" BUILD target associated with the current file and update the deps for you.
Glug blazedeps

" ALE.
Glug glug sources+=`$HOME . '/.vim/local'`
Glug glint-ale
let g:ale_linters = {
      \ 'borg': ['glint'],
      \ 'bzl': ['glint'],
      \ 'cpp': ['glint'],
      \ 'dremel': ['glint'],
      \ 'gcl': ['glint'],
      \ 'go': ['glint'],
      \ 'html': ['glint'],
      \ 'java': ['glint'],
      \ 'javascript': ['glint'],
      \ 'jslayout': ['glint'],
      \ 'proto': ['glint'],
      \ 'python': ['glint'],
      \ 'typescript': ['glint'],
      \}
