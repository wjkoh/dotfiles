source /usr/share/vim/google/google.vim

" This adds useful keymappings for Piper.
" 1. <Leader>pf :PiperSelectActiveFiles<CR>
" 2. <Leader>po :PiperOpenPath 
" and so on.
Glug piper plugin[mappings]='<Leader>p'

" Loads youcompleteme, the awesomest autocompletion engine.
" See go/ycm for more details.
Glug youcompleteme-google
nnoremap <C-]> :YcmCompleter GoTo<CR>  " Override the default jump key.

" Load the code formatting plugin. We first load the open-source version. Then,
" we load the internal google settings. Then, we automatically enable formatting
" when we write the file for Go, BUILD, proto, and c/cpp files.
" Use :h codefmt-google or :h codefmt for more details.
Glug codefmt
Glug codefmt-google

" Wrap autocmds inside an augroup to protect against reloading this script.
" For more details, see:
" http://learnvimscriptthehardway.stevelosh.com/chapters/14.html
augroup autoformat
  autocmd!
  autocmd FileType bzl AutoFormatBuffer buildifier
  autocmd FileType c,cpp,proto,javascript,cuda AutoFormatBuffer clang-format
  autocmd FileType go AutoFormatBuffer gofmt
  autocmd FileType python AutoFormatBuffer pyformat
augroup END

" Load the G4 plugin, which allows G4MoveFile, G4Edit, G4Pending, etc.
" Use :h g4 for more details about this plugin.
Glug g4

" Load the Critique integration. Use :h critique for more details.
Glug critique

" Load the Related Files plugin. Use :h relatedfiles for more details.
" The default mapping to run :RelatedFilesWindow is <Leader>r. Thus, <Leader>r
" -> b: BUILD file, t: test file, c: source file, h: header file, and so on.
Glug relatedfiles plugin[mappings] window_position="topleft"

" Enable the corpweb plugin, which allows us to open codesearch from vim.
" <Leader>ww: search in critique for the word under the cursor
" <Leader>wf: search in critique for the current file
Glug corpweb plugin[mappings]='<Leader>w'

" Blaze key mappings, i.e., Glug blaze plugin[mappings]='<leader>b', conflict
" with my own key mapping, i.e., nnoremap <Leader>b :b <C-d>. Use <Leader>m
" instead to invoke the Blaze commands.
Glug blaze

" Use :BlazeDepsUpdate in files you're editing and blazedeps will determine the
" BUILD target associated with the current file and update the deps for you.
Glug blazedeps
