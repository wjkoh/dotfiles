Host *
  # Always use SSH2.
  Protocol 2
  # Keep connections.
  ServerAliveInterval 30
  ServerAliveCountMax 6
  # You don't need TCPKeepAlive if ServerAlive* is on.
  TCPKeepAlive no
  # No compression.
  Compression no

# SSH multiplexing. Do not apply it globally. SSHing to some hosts, for example
# Bitbucket, will encounter authentication errors. See
# https://companydoc.corp.google.com/company/corp/ssh/faq/index.md?cl=head#fewer-touches.
Host *.corp.google.com *.c.googlers.com
  # See http://go/corp-ssh-helper#select-relay.
  ProxyCommand corp-ssh-helper -relay mtv8.r.ext.google.com %h %p
  ControlMaster auto
  ControlPath ~/.ssh/master-%r@%h:%p
  ControlPersist 240m
  # Forward port 8888 for Colab local runtime.
  LocalForward 8888 localhost:8888

Host bitbucket.org
  # See https://unix.stackexchange.com/a/124170.
  IdentityFile ~/.ssh/id_rsa
  IdentitiesOnly yes
