Host *
  # Always use SSH2.
  Protocol 2
  # Keep connections.
  ServerAliveInterval 30
  ServerAliveCountMax 6
  TCPKeepAlive no

Host bitbucket.org
  # See https://unix.stackexchange.com/a/124170.
  IdentityFile ~/.ssh/id_rsa
  IdentitiesOnly yes

# SSH multiplexing. Do not apply it globally. SSHing to some hosts, for example
# Bitbucket, will encounter authentication errors.
# See https://companydoc.corp.google.com/company/corp/ssh/faq/index.md?cl=head#fewer-touches.
Host *.corp.google.com *.googlers.com
  ControlMaster auto
  ControlPath ~/.ssh/master-%r@%h:%p
  ControlPersist 240m
